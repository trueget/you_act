{% extends 'base.html' %}
{% load rest_framework %}

{% block title %}мои колонки{% endblock title %}

{% block my_workspace %}
    <br>
    <p>все задачи по колонкам одной доски</p>

    <br><br>
        {% for column in data %}
            <div class="column">
                <a href="{% url 'tasks:delete-column' column.id %}">УДАЛИТЬ КОЛОНКУ</a> <br>
                <p>{{ column.id }} - id column</p> <br>
                {% if column.tasks_in_column %}
                    {% for task in column.tasks_in_column %}
                        <p>{{ task.tittle }}</p>
                        <p>{{ task.id }}</p>
                        <td>{{ task.description }}</td>
                        <p>{{ task.column }}</p>
                        <a href="{% url 'tasks:delete-task' task.id %}">удалить таску</a>
                        <br><br><br>
                    {% endfor %}
                {% else %}
                    <p>в этой колонке пока нет задач!</p>
                {% endif %}
                <br>
                <form method="POST" action="{% url 'tasks:create-task' pk=column.id %}">
                    {% csrf_token %}
                        {{ task_form }}
                    <input type="submit"  name="task-form" value="сохранить задачу">
                </form>
                
            </div><br><br>
        {% endfor %}

<br><br>

<p>column Form</p>
<br>
<br>
<div class="form">
    <form  method="POST" action="{% url 'tasks:my-board' pk=board.id %}">
        {% csrf_token %}
        {{ column_form }}
        <input type="submit" name="column-form" value="сохранить колонку">
    </form>
</div>
<br>

{% endblock my_workspace %}
