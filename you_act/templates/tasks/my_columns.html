{% extends 'base.html' %}
{% load rest_framework %}

{% block title %}мои колонки{% endblock title %}

{% block my_workspace %}
    <p>все колонки одной доски</p> <br>
    {% if columns %}
        {% for column in columns %}
            <div class="column">
                <p>{{ column.board }}</p>
                <p>{{ column.id }}</p>
                <p>{{ column.date_create }}</p>
                <a href="{% url 'tasks:delete-column' column.id %}">удалить колонку</a>
            </div>
            <br><br><br>
        {% endfor %}
    {% else %}
    <br><br>
        <p>на этой доске пока нет колонок!</p>
    {% endif %}



    <br><br><br><br>

    <p>все таски одной доски</p>

    <br><br>
        {% for column in all_tasks_on_board %}
            <div class="column">
                {% if column %}
                <p>{{ column.0.column.id}} - id column</p>
                
                    {% for task in column %}
                        <p>{{ task.tittle }}</p>
                        <p>{{ task.id }}</p>
                        <td>{{ task.description }}</td>
                        <p>{{ task.column }}</p>
                        <a href="{% url 'tasks:delete-task' task.id %}">удалить таску</a>
                        <br><br><br>
                    {% endfor %}
                {% else %}
                    <p>на этой доске пока нет колонок!</p>
                {% endif %}
                <br>
                <p>form</p>
                <form method="POST">
                    {% csrf_token %}
                        {{ task_form }}
                    <input type="submit" name="save-task" value="сохранить задачу">
                </form>
                
            </div>
            <br><br>
        {% endfor %}

<br><br>

<p>Form</p>
<br>
<p>Вывод формы {{obj}}</p>
<br>

<div class="form">
    <form  method="POST">
        {% csrf_token %}
        {{ column_form }}
        <input type="submit" name="save-column" value="сохранить колонку">
    </form>
</div>
<br>

{% endblock my_workspace %}
